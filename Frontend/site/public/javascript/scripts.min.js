"use strict";var latitude,longitude,attraction_map,attraction_map_container=document.getElementById("map-container");attraction_map_container&&(latitude=parseFloat(document.getElementById("attraction__latitude").textContent),longitude=parseFloat(document.getElementById("attraction__longitude").textContent),attraction_map=L.map("map-container").setView([latitude,longitude],16),L.tileLayer("https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.jpg",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',maxZoom:18,tileSize:256,zoomOffset:0}).addTo(attraction_map),L.marker([latitude,longitude]).addTo(attraction_map));var dropdownActive=!1;function toggleMenuVisibility(){dropdownActive?(dropdownActive=!1,dropdownMenuItems.style.display="none"):(dropdownActive=!0,dropdownMenuItems.style.display="block")}function menuButtonKeydown(e){9!=e.keyCode&&toggleMenuVisibility()}function lastLinkButtonKeydown(e){9==e.keyCode&&toggleMenuVisibility()}var dropdownMenuButton=document.getElementById("dropdown-menu-button"),dropdownMenuItems=document.getElementById("dropdown-menu-items"),finalDropdownMenuLink=dropdownMenuItems.children[dropdownMenuItems.children.length-1];dropdownMenuButton.addEventListener("click",toggleMenuVisibility),dropdownMenuButton.addEventListener("keydown",menuButtonKeydown),finalDropdownMenuLink.addEventListener("keydown",lastLinkButtonKeydown);var _latitude,_longitude,landingPageMap,attractions,landingPageMapContainer=document.getElementById("landing-page-hero__map-container");landingPageMapContainer&&(_latitude=51.453749,_longitude=-2.591873,landingPageMap=L.map("landing-page-hero__map-container",{zoomControl:!1}).setView([_latitude,_longitude],14),L.tileLayer("https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.jpg",{attribution:"Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under ODbL.",maxZoom:18,tileSize:256,zoomOffset:0}).addTo(landingPageMap));var siteURL,strapiURL,landingPageExploreContainer=document.getElementById("landing-page__explore-section"),attractionsVisited=0;function getSubcategoryChoices(){for(var e={},t=0;t<attractions.length;t++){var n=attractions[t];if(0==n.visited)for(var i=0;i<n.subcategories.length;i++){var o=n.subcategories[i];if(o in e==0){e[o.name]=t;break}}}return e}function displayNextChoiceCard(e){var t;e==attractionsVisited+1&&(fillInChoiceCard(e),t="choice-card--"+e.toString(),document.getElementById(t).style.display="block")}function fillInChoiceCard(e){var t=getSubcategoryChoices(),n="choice-card-list--"+e.toString(),i=document.getElementById(n);if(i.innerHTML="",0!=Object.entries(t).length){var o=3;Object.entries(t).length<o&&(o=Object.entries(t).length);for(var a=0;a<o;a++){var r="";r+='<a tabindex="0" id="choice-card--'+e+"-subcategory-list-item--"+a+'" href="#attraction-card--'+e+'" onclick="fillInAttractionCard('+e+", ",r+=Object.entries(t)[a][1].toString(),r+=')"><li class="card__link-item">',r+=Object.entries(t)[a][0].toString(),r+="</li></a>",i.innerHTML+=r}}else i.innerHTML="<p class='landing-page__choice-card--error-message'>We're sorry, but there are no other registered attractions in this region. This website is under development and more will be added soon.</p>"}function fillInAttractionCard(e,t){var n,i,o,a,r,d,l,c,s,g;e==attractionsVisited+1&&(attractionsVisited+=1,n="attraction-card--"+e.toString(),document.getElementById(n).style.display="block",i=attractions[t],o="attraction-card--image-"+e.toString(),a="attraction-card--title-"+e.toString(),r="attraction-card--tagline-"+e.toString(),d="attraction-card--explore-link-"+e.toString(),l=document.getElementById(o),c=document.getElementById(a),s=document.getElementById(r),g=document.getElementById(d),c.innerText=i.name,s.innerText=i.tagline,l.style.backgroundImage="url('"+strapiURL+i.image[0].url+"')",g.href=siteURL+"attractions/"+i.id,i.visited=!0)}function loadRegionContent(e){var t;0==attractionsVisited&&(siteURL=siteURLContainer.innerHTML,strapiURL=strapiURLContainer.innerHTML,console.log(siteURL),console.log(strapiURL),t=strapiURL+"/attractions?region="+encodeURIComponent(e),console.log(t),fetch(t).then(function(e){return e.json()}).then(function(e){attractions=e,console.log(attractions);for(var t=0;t<attractions.length;t++)attractions[t].visited=!1;fillInChoiceCard(1),document.getElementById("choice-card--1").style.display="block";document.getElementById("choice-card--1-subcategory-list-item--0").focus()}),exploreSectionHider.style.display="none",landingPageExploreContainer.scrollIntoView({behavior:"smooth"}))}var region_arnos_vale=document.getElementById("interactive-map--arnos-vale"),region_temple_meads=document.getElementById("interactive-map--temple-meads"),region_southville=document.getElementById("interactive-map--southville"),region_harbourside=document.getElementById("interactive-map--harbourside"),region_city_centre=document.getElementById("interactive-map--city-centre"),region_clifton=document.getElementById("interactive-map--clifton"),region_stokes_croft=document.getElementById("interactive-map--stokes-croft"),finishButton=document.getElementById("attraction-card--finish-button"),adventureEndCard=document.getElementById("adventure-end-card"),exploreSectionHider=document.getElementById("landing-page__explore-section-hider"),siteURLContainer=document.getElementById("landing-page__site-url"),strapiURLContainer=document.getElementById("landing-page__strapi-url");region_arnos_vale&&(region_arnos_vale.addEventListener("click",function(){loadRegionContent("Arnos Vale")},!1),region_temple_meads.addEventListener("click",function(){loadRegionContent("Temple Meads")},!1),region_southville.addEventListener("click",function(){loadRegionContent("Southville")},!1),region_harbourside.addEventListener("click",function(){loadRegionContent("Harbourside")},!1),region_city_centre.addEventListener("click",function(){loadRegionContent("City Centre")},!1),region_clifton.addEventListener("click",function(){loadRegionContent("Clifton")},!1),region_stokes_croft.addEventListener("click",function(){loadRegionContent("Stokes Croft")},!1),finishButton.addEventListener("click",function(){adventureEndCard.style.display="block"},!1),region_arnos_vale.addEventListener("keypress",function(){loadRegionContent("Arnos Vale")},!1),region_temple_meads.addEventListener("keypress",function(){loadRegionContent("Temple Meads")},!1),region_southville.addEventListener("keypress",function(){loadRegionContent("Southville")},!1),region_harbourside.addEventListener("keypress",function(){loadRegionContent("Harbourside")},!1),region_city_centre.addEventListener("keypress",function(){loadRegionContent("City Centre")},!1),region_clifton.addEventListener("keypress",function(){loadRegionContent("Clifton")},!1),region_stokes_croft.addEventListener("keypress",function(){loadRegionContent("Stokes Croft")},!1),finishButton.addEventListener("keypress",function(){adventureEndCard.style.display="block"},!1));